<div class="container mb-5" *ngIf="teamInfo">

  <div class="row mt-4">
    <div class="col-12">
      <h1 class="text-center">Avancement des équipes</h1>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-12 px-0 py-1 bg-secondary">
      <h4 class="my-auto text-center text-white">Equipe {{teamInfo.team}} ({{teamInfo.name}})</h4>
    </div>
  </div>

  <div class="row mt-0">
    <table class="col-12 table table-sm align-items-center text-center ">
      <thead class="bg-light">
        <tr>
          <th class="align-middle">#</th>
          <th class="align-middle">Epreuve</th>
          <th class="align-middle">Statut</th>
          <th class="align-middle">Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let stageParam of stageParams">
          <th class="align-middle">{{stageParam.stage}}</th>
          <td class="align-middle">{{stageParam.name}}</td>
          <td class="align-middle">
            <div *ngIf="stages[stageParam.stage] && stages[stageParam.stage].begin && !stages[stageParam.stage].end">Epreuve en cours</div>
            <div *ngIf="stages[stageParam.stage] && stages[stageParam.stage].begin && stages[stageParam.stage].end">Epreuve achevée</div>
            <div *ngIf="!stages[stageParam.stage] || !stages[stageParam.stage].begin">Epreuve non réalisée</div>
          </td>
          <td class="align-middle">
            <section>
              <div *ngIf="stages[stageParam.stage] && stages[stageParam.stage].begin && !stages[stageParam.stage].end">
                <button type="button" class="btn-success mx-auto my-1" style="width: 110px" (click)="onStopStage(stageParam.stage)">Terminer</button>
              </div>
              <div *ngIf="!stages[stageParam.stage] || !stages[stageParam.stage].begin">
                  <button type="button" class="btn-success mx-auto my-1" style="width: 110px" (click)="onStartStage(stageParam.stage)">Commencer</button>
              </div>
              <div *ngIf="stages[stageParam.stage] && stages[stageParam.stage].begin && !stages[stageParam.stage].end">
                <button type="button" class="btn-danger mx-auto my-1" style="width: 110px" (click)="onCancelStage(stageParam.stage)">Annuler</button>
              </div>
              <div *ngIf="stages[stageParam.stage] && stages[stageParam.stage].begin && stages[stageParam.stage].end">
                <button type="button" class="btn-danger mx-auto my-1" style="width: 110px" (click)="onUndoStage(stageParam.stage)">Reprendre</button>
              </div>
              <button type="button" class="btn-primary mx-auto my-1" style="width: 110px" *ngIf="stages[stageParam.stage]" routerLink="/stage/{{teamInfo.team}}/{{stageParam.stage}}">Détails</button>
            </section>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
