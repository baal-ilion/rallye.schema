version: "3"
services:
  mongodb:
    image: mongo
    container_name: "mongodb"
    ports:
      - 27017:27017
    volumes:
      - mongodb_db:/data/db
      - mongodb_configdb:/data/configdb
    restart: always
  rabbitmq:
    image: rabbitmq:management
    container_name: "rabbitmq"
    ports:
      - 4369:4369
      - 5672:5672
      - 25672:25672
      - 15672:15672
    environment:
      - RABBITMQ_DEFAULT_USER=rallyeschema
      - RABBITMQ_DEFAULT_PASS=rallyeschema
    volumes:
      - rabbitmq:/var/lib/rabbitmq
    restart: always
  rallye-schema-response-service:
    image: baalilion/rallye-schema-response-service
    container_name: "rallye-schema-response-service"
    ports:
      - 8080:8080
    links:
      - mongodb
      - rabbitmq
    restart: always
    environment:
       - "SPRING_PROFILES_ACTIVE=docker"
volumes:
  mongodb_db:
  mongodb_configdb:
  rabbitmq:
  